# ğŸ“š API de Documentos com Flask e MongoDB Atlas

<div align="center">

![Python](https://img.shields.io/badge/Python-3.8+-blue?style=for-the-badge&logo=python&logoColor=white)
![Flask](https://img.shields.io/badge/Flask-2.0+-green?style=for-the-badge&logo=flask&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-Atlas-47A248?style=for-the-badge&logo=mongodb&logoColor=white)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)

*Uma API RESTful simples e poderosa desenvolvida em Python com Flask para interagir com MongoDB Atlas na nuvem*

</div>

---

## ğŸš€ Funcionalidades

A API oferece um conjunto completo de endpoints para gerenciamento de documentos:

| Endpoint | MÃ©todo | DescriÃ§Ã£o | Exemplo |
|----------|--------|-----------|---------|
| `/` | `GET` | ğŸ  Verificar status da API | - |
| `/cadastrar` | `POST` | â• Cadastrar novo documento | `{"nome": "JoÃ£o", "email": "..."}` |
| `/pesquisar_nome` | `GET` | ğŸ” Buscar por nome | `?nome=Ana` |
| `/pesquisar_rua` | `GET` | ğŸ“ Buscar por endereÃ§o | `?rua=Acacias` |
| `/pesquisar_compras` | `GET` | ğŸ›’ Buscar por produtos | `?produto=Livro` |
| `/deletar/{id}` | `DELETE` | ğŸ—‘ï¸ Deletar documento | - |

> **ğŸ’¡ Dica:** Todas as pesquisas sÃ£o **case-insensitive** e suportam busca parcial!

---

## ğŸ“‹ PrÃ©-requisitos

Antes de comeÃ§ar, vocÃª precisarÃ¡ ter:

### ğŸ Python
- **VersÃ£o:** Python 3.8 ou superior
- **VerificaÃ§Ã£o:** `python --version` ou `python3 --version`
- **Windows:** Configure os "Aliases de execuÃ§Ã£o do aplicativo" ou instale via Microsoft Store

### ğŸƒ MongoDB Atlas
- âœ… Conta no MongoDB Atlas
- âœ… Cluster configurado (M0 Sandbox gratuito Ã© suficiente)
- âœ… UsuÃ¡rio do banco com credenciais
- âœ… Acesso de rede configurado para seu IP

### ğŸ”§ Ferramentas de Teste
Escolha uma das opÃ§Ãµes:
- [ğŸ“± Insomnia](https://insomnia.rest/download) (Recomendado)
- [ğŸ“® Postman](https://www.postman.com/downloads/)

---

## âš™ï¸ ConfiguraÃ§Ã£o e InstalaÃ§Ã£o

### 1ï¸âƒ£ Preparar o Ambiente

```bash
# Criar pasta do projeto
mkdir meu_projeto_api
cd meu_projeto_api
```

### 2ï¸âƒ£ Ambiente Virtual

```bash
# Criar ambiente virtual
python -m venv venv

# Ativar ambiente virtual
# Windows (CMD/PowerShell):
.\venv\Scripts\activate

# macOS/Linux:
source venv/bin/activate
```

> **âœ… Sucesso:** VocÃª verÃ¡ `(venv)` no inÃ­cio da linha de comando

### 3ï¸âƒ£ Instalar DependÃªncias

```bash
pip install Flask pymongo python-dotenv
```

### 4ï¸âƒ£ Configurar MongoDB Atlas

1. ğŸŒ Acesse seu [painel do MongoDB Atlas](https://cloud.mongodb.com/)
2. ğŸ“Š VÃ¡ para **Database** (ou Clusters)
3. ğŸ”— No seu cluster, clique em **Connect**
4. ğŸ Escolha **Connect your application** > **Python**
5. ğŸ“‹ Copie a string de conexÃ£o:

```
mongodb+srv://IgorSebastiann:<db_password>@cluster0.nzglgwc.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
```

> **âš ï¸ Importante:** Substitua `<db_password>` pela senha real!

### 5ï¸âƒ£ Configurar VariÃ¡veis de Ambiente

Crie um arquivo `.env` na raiz do projeto:

```env
MONGODB_URI="mongodb+srv://IgorSebastiann:SUA_SENHA_REAL@cluster0.nzglgwc.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0"
MONGODB_DB_NAME="trabalho_final_db"
MONGODB_COLLECTION_NAME="clientes_geral"
```

### 6ï¸âƒ£ Criar o Arquivo Principal

Crie o arquivo `app.py` com o cÃ³digo da API (cÃ³digo fornecido no documento original).

---

## â–¶ï¸ Executando a API

1. **ğŸ”„ Verifique se seu cluster MongoDB Atlas estÃ¡ ativo**
2. **ğŸš€ Execute a aplicaÃ§Ã£o:**

```bash
python app.py
```

3. **âœ… VocÃª verÃ¡:**

```
 * Serving Flask app 'app'
 * Debug mode: on
 * Running on http://127.0.0.1:5000
```

> **ğŸ‰ Pronto!** Sua API estÃ¡ rodando em `http://127.0.0.1:5000`

---

## ğŸ§ª Como Testar com Insomnia

### ğŸ“ Estrutura de Documento de Exemplo

```json
{
  "nome": "Ana Clara Oliveira",
  "email": "ana.clara@example.com",
  "telefone": "5511987654321",
  "data_nascimento": "1988-11-25T00:00:00.000+00:00",
  "endereco": {
    "rua": "Rua das Acacias",
    "numero": "45",
    "bairro": "Jardim Paulista",
    "cidade": "SÃ£o Paulo",
    "estado": "SP",
    "cep": "01400-000"
  },
  "ativo": true,
  "tags": ["cliente ouro", "newsletter"],
  "historico_compras": [
    {
      "product_id": "book543",
      "descricao": "Livro de culinÃ¡ria",
      "valor": "75.00"
    },
    {
      "product_id": "home123",
      "descricao": "Conjunto de panelas",
      "valor": "350.00"
    }
  ]
}
```

### ğŸ¯ CenÃ¡rios de Teste

<details>
<summary><strong>1ï¸âƒ£ Testar Status da API</strong></summary>

- **MÃ©todo:** `GET`
- **URL:** `http://127.0.0.1:5000/`
- **Esperado:** `200 OK` + mensagem de boas-vindas

</details>

<details>
<summary><strong>2ï¸âƒ£ Cadastrar Documento</strong></summary>

- **MÃ©todo:** `POST`
- **URL:** `http://127.0.0.1:5000/cadastrar`
- **Body:** JSON (exemplo acima)
- **Esperado:** `201 Created` + ID do documento

</details>

<details>
<summary><strong>3ï¸âƒ£ Pesquisar por Nome</strong></summary>

- **MÃ©todo:** `GET`
- **URL:** `http://127.0.0.1:5000/pesquisar_nome?nome=Ana`
- **Esperado:** Lista de documentos ou `404` se nÃ£o encontrar

</details>

<details>
<summary><strong>4ï¸âƒ£ Pesquisar por Rua</strong></summary>

- **MÃ©todo:** `GET`
- **URL:** `http://127.0.0.1:5000/pesquisar_rua?rua=Acacias`
- **Esperado:** Documentos com endereÃ§os correspondentes

</details>

<details>
<summary><strong>5ï¸âƒ£ Pesquisar por Produto</strong></summary>

- **MÃ©todo:** `GET`
- **URL:** `http://127.0.0.1:5000/pesquisar_compras?produto=Livro`
- **Esperado:** Documentos com histÃ³rico de compras correspondente

</details>

<details>
<summary><strong>6ï¸âƒ£ Deletar Documento</strong></summary>

- **MÃ©todo:** `DELETE`
- **URL:** `http://127.0.0.1:5000/deletar/{ID_DO_DOCUMENTO}`
- **Esperado:** `200 OK` + confirmaÃ§Ã£o de exclusÃ£o

</details>

---

## ğŸ”§ SoluÃ§Ã£o de Problemas

<details>
<summary><strong>ğŸš¨ Problemas Comuns e SoluÃ§Ãµes</strong></summary>

### ğŸ Python nÃ£o encontrado
- Verifique a instalaÃ§Ã£o do Python
- Configure o PATH do sistema
- Use `python3` em vez de `python`

### ğŸ” Erro de AutenticaÃ§Ã£o (`bad auth`)
- âœ… Verifique usuÃ¡rio e senha no `.env`
- âœ… Confirme se seu IP estÃ¡ na whitelist do Atlas
- âœ… Teste a conexÃ£o no MongoDB Compass

### ğŸŒ Page Not Found (404)
- âœ… Verifique se todas as rotas estÃ£o definidas
- âœ… Confirme se a funÃ§Ã£o `home()` existe
- âœ… Reinicie a aplicaÃ§Ã£o

### ğŸ’¥ Internal Server Error (500)
- ğŸ“Š Olhe o terminal para ver o traceback
- ğŸ” Verifique as variÃ¡veis de ambiente
- ğŸ”§ Confirme a conexÃ£o com o banco

### ğŸ“Š Documentos nÃ£o aparecem
- âœ… Confirme se o POST retornou `201 Created`
- âœ… Verifique os nomes do banco e coleÃ§Ã£o (case-sensitive)
- ğŸ” Use o MongoDB Compass para visualizar os dados

</details>

---

## ğŸ¤ ContribuiÃ§Ã£o

ContribuiÃ§Ãµes sÃ£o sempre bem-vindas! VocÃª pode:

- ğŸ› Reportar bugs
- ğŸ’¡ Sugerir novas funcionalidades
- ğŸ”§ Melhorar o cÃ³digo
- ğŸ“š Aprimorar a documentaÃ§Ã£o

### ğŸ’» Para Desenvolvedores

```bash
# Fork o projeto
git clone https://github.com/seu-usuario/api-documentos-mongodb.git
cd api-documentos-mongodb

# Crie uma branch para sua feature
git checkout -b feature/nova-funcionalidade

# FaÃ§a suas alteraÃ§Ãµes e commit
git commit -m "Adiciona nova funcionalidade"

# Push e abra um Pull Request
git push origin feature/nova-funcionalidade
```

---

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo `LICENSE` para mais detalhes.

---

## ğŸ“ Suporte

Encontrou algum problema?

- ğŸ“§ **Email:** seuemail@example.com
- ğŸ’¬ **Issues:** [Abra uma issue](https://github.com/seu-usuario/repo/issues)
- ğŸ“š **DocumentaÃ§Ã£o:** [MongoDB Atlas Docs](https://docs.atlas.mongodb.com/)

---

<div align="center">

**â­ Se este projeto te ajudou, considere dar uma estrela!**

*Desenvolvido com â¤ï¸ usando Flask e MongoDB Atlas*

</div>
